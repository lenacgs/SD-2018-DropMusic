<?xml version="1.0" encoding="UTF-8"?>

<!-- The core configuration file for the framework is the default (struts.xml) file
and should reside on the classpath of the webapp (generally /WEB-INF/classes). -->

<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <!-- devMode equals debug information and reload everything for every request -->
    <constant name="struts.devMode" value="true" />
    <constant name="struts.ui.theme" value="simple" />
    <package name="hey" extends="struts-default">

	<default-action-ref name="index" />
	
	<global-results>
		<result name="error">/menu.jsp</result>
	</global-results>

	<!-- all exceptions not caught by the application will lead to error.jsp -->
	<global-exception-mappings>
		<exception-mapping exception="java.lang.Exception" result="error" />
	</global-exception-mappings>

	<!-- 'index' Actions leads to the view provided by index.jsp -->
    <action name="index">
        <result>/index.jsp</result>
    </action>

	<!-- 'LoginBean' Actions calls 'execute' in 'LoginAction' -->
    <!-- _______________________________________________________________________________________ -->
    <action name="login" class="Web.Actions.LoginAction" method="execute">
        <result name="success">/menu.jsp</result>
        <result name="login">/login.jsp</result>
    </action>
    <action name="loginMenu">
        <result>/login.jsp</result>
    </action>

    <action name="menu">
        <result>/menu.jsp</result>
    </action>

    <action name="register" class="Web.Actions.RegisterAction" method="execute">
        <result name="success">/menu.jsp</result>
        <result name="register">/register.jsp</result>
    </action>
    <action name="registerMenu">
        <result>/register.jsp</result>
    </action>
    <!-- _______________________________________________________________________________________ -->
    <action name="menu">
        <result>/menu.jsp</result>
    </action>

    <action name="searchMenu">
        <result>/search1.jsp</result>
    </action>

    <action name="search" class="Web.Actions.SearchAction" method="execute">
        <result name = "SUCCEED">/search2.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>

    <action name="details" class="Web.Actions.DetailsAction" method="execute">
        <result name = "SUCCEED">/details.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>
    <!-- _______________________________________________________________________________________ -->

    <action name="reviewMenu">
        <result>/review.jsp</result>
    </action>

    <action name="review" class="Web.Actions.ReviewAction" method="execute">
        <result name = "SUCCEED">/menu.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>
    <!-- _______________________________________________________________________________________ -->
    <action name="createGroupMenu">
        <result>/createGroup.jsp</result>
    </action>
    <action name="createGroup" class="Web.Actions.CreateGroupAction" method="execute">
        <result name="YES">/menu.jsp</result>
        <result name="NO">/menu.jsp</result>
    </action>
    <!-- _______________________________________________________________________________________ -->
    <action name="joinGroupMenu" class="Web.Actions.JoinGroupMenuAction" method="execute">
        <result name = "SUCCEED">/joinGroup.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>

    <action name="joinGroup" class="Web.Actions.JoinGroupAction" method="execute">
        <result name = "FAILED">/error.jsp</result>
        <result name = "SUCCEED">/menu.jsp</result>
    </action>
    <!-- _______________________________________________________________________________________ -->
    <action name="addInfoMenu" class="Web.Actions.AddInfoMenuAction" method="execute">
        <result name = "SUCCEED">/addInfo.jsp</result>
    </action>

    <action name="addMusicMenu">
        <result>/addMusic.jsp</result>
    </action>

    <action name="addArtistMenu">
        <result>/addArtist.jsp</result>
    </action>

    <action name="addAlbumMenu">
        <result>/addAlbum.jsp</result>
    </action>

    <action name="addInfo" class="Web.Actions.AddInfoAction" method="execute">
        <result name = "SUCCEED">/menu.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>

    <!-- _______________________________________________________________________________________ -->

    <action name="changeInfoMenu" class="Web.Actions.ChangeInfoMenuAction" method="execute">
        <result name = "SUCCEED">/addInfo.jsp</result>
    </action>

    <action name="changeMusicMenu">
        <result>/addMusic.jsp</result>
    </action>

    <action name="changeArtistMenu">
        <result>/addArtist.jsp</result>
    </action>

    <action name="changeAlbumMenu">
        <result>/addAlbum.jsp</result>
    </action>

    <action name="changeInfo" class="Web.Actions.ChangeInfoAction" method="execute">
        <result name = "SUCCEED">/menu.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>

    <!-- _______________________________________________________________________________________ -->
    <action name="manageGroupsMenu" class="Web.Actions.ManageGroupsMenuAction" method="execute">
        <result name = "SUCCEED">/manageGroup.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>
    <action name="manageGroupRequests" class="Web.Actions.ManageGroupRequestsAction" method="execute">
        <result name = "SUCCEED">/manageRequests.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>
    <action name="acceptRequest" class="Web.Actions.ManageRequestsAction" method="execute">
        <result name = "SUCCEED">/menu.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
        <param name = "toDo"> accept</param>
    </action>
    <action name="declineRequest" class="Web.Actions.ManageRequestsAction" method="execute">
        <result name = "SUCCEED">/menu.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
        <param name = "toDo"> decline</param>
    </action>
    <!-- _______________________________________________________________________________________ -->

    <action name="permissionsMenu">
        <result>/permissions.jsp</result>
    </action>

    <action name="givePermissions" class="Web.Actions.GivePermissionsAction" method="execute">
        <result name = "SUCCEED">/menu.jsp </result>
        <result name = "FAILED">/menu.jsp </result>
    </action>

        <action name="loginDropbox" class="Web.Actions.LoginDropboxAction" method="execute">
            <result name="REDIRECT" type="redirect">${authorization}</result>
        </action>

        <action name="loginDropboxSuccess" class="Web.Actions.LoginDropboxSuccessAction" method="execute">
            <result name="success">/menu.jsp</result>
            <result name="fail">/index.jsp</result>
        </action>

        <!--redirects user to dropbox website when execute() returns "REDIRECT"-->
        <action name="associateButton" class="Web.Actions.AssociateButtonAction" method="execute">
            <result name="REDIRECT" type="redirect">${authorization}</result>
        </action>

        <action name="associateDropbox" class="Web.Actions.AssociateDropboxAction" method="execute">
            <result name="success">/menu.jsp</result>
            <result name="fail">/menu.jsp</result>
        </action>

        <action name="upload" class="Web.Actions.UploadAction" method="execute">
            <result name="fail">/menu.jsp</result>
            <result name="success">/upload.jsp</result>
        </action>

        <action name="uploadThis" class="Web.Actions.UploadThisAction" method="execute">
            <result name="success">/menu.jsp</result>
        </action>

        <action name="share">
            <result>/share.jsp</result>
        </action>

        <action name="shareThis" class="Web.Actions.ShareAction" method="execute">
            <result name="success">/menu.jsp</result>
            <result name="fail">/menu.jsp</result>
        </action>

        <action name="myFiles" class="Web.Actions.MyFilesAction" method="execute">
            <result name="success">/myFiles.jsp</result>
            <result name="fail">/menu.jsp</result>
        </action>

    </package>

</struts>